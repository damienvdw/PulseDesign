/*
 * Lean Slider v1.0
 * http://dev7studios.com/lean-slider
 *
 * Copyright 2012, Dev7studios
 * Free to use and abuse under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 */(function(e){e.fn.leanSlider=function(t){var n={pauseTime:4e3,pauseOnHover:!0,startSlide:0,directionNav:"",directionNavPrevBuilder:"",directionNavNextBuilder:"",controlNav:"",controlNavBuilder:"",prevText:"Prev",nextText:"Next",beforeChange:function(){},afterChange:function(){},afterLoad:function(){}},r=this,i={},s=e(this),o=s.children(),u=0,a=0,f=function(){i=e.extend({},n,t);s.addClass("lean-slider");o.addClass("lean-slider-slide");u=i.startSlide;if(i.startSlide<0||i.startSlide>=o.length)u=0;e(o[u]).addClass("current");if(i.directionNav&&e(i.directionNav).length){var f=e('<a href="#" class="lean-slider-prev">'+i.prevText+"</a>"),p=e('<a href="#" class="lean-slider-next">'+i.nextText+"</a>");i.directionNavPrevBuilder&&(f=e(i.directionNavPrevBuilder.call(this,i.prevText)));i.directionNavNextBuilder&&(p=e(i.directionNavNextBuilder.call(this,i.nextText)));f.on("click",function(e){e.preventDefault();r.prev()});p.on("click",function(e){e.preventDefault();r.next()});e(i.directionNav).append(f);e(i.directionNav).append(p)}i.controlNav&&e(i.controlNav).length&&o.each(function(t){var n=e('<a href="#" class="lean-slider-control-nav">'+(t+1)+"</a>");i.controlNavBuilder&&(n=e(i.controlNavBuilder.call(this,t,e(o[t]))));n.on("click",function(e){e.preventDefault();r.show(t)});e(i.controlNav).append(n)});i.pauseOnHover&&i.pauseTime&&i.pauseTime>0&&s.hover(function(){clearTimeout(a);e(window).triggerHandler("pauseTimer")},function(){e(window).triggerHandler("resumeAnim")});e(window).on("resumeTimer",function(e,t){l(t)});h();c();i.afterLoad.call(this);return r},l=function(e){if(i.pauseTime&&i.pauseTime>0){clearTimeout(a);a=setTimeout(function(){r.next()},e)}},c=function(){if(i.pauseTime&&i.pauseTime>0){clearTimeout(a);a=setTimeout(function(){r.next()},i.pauseTime)}},h=function(){if(i.controlNav){e(".lean-slider-control-nav",i.controlNav).removeClass("active");e(e(".lean-slider-control-nav",i.controlNav).get(u)).addClass("active")}};r.prev=function(){i.beforeChange.call(this,u);u--;u<0&&(u=o.length-1);o.removeClass("current");e(o[u]).addClass("current");h();c();i.afterChange.call(this,u)};r.next=function(){i.beforeChange.call(this,u);u++;u>=o.length&&(u=0);o.removeClass("current");e(o[u]).addClass("current");h();c();i.afterChange.call(this,u)};r.show=function(t){i.beforeChange.call(this,u);u=t;u<0&&(u=o.length-1);u>=o.length&&(u=0);o.removeClass("current");e(o[u]).addClass("current");h();c();i.afterChange.call(this,u)};return f()}})(jQuery);